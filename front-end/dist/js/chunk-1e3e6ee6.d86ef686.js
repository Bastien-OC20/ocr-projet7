(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e3e6ee6"],{"1dde":function(e,t,a){var s=a("d039"),c=a("b622"),o=a("2d00"),r=c("species");e.exports=function(e){return o>=51||!s((function(){var t=[],a=t.constructor={};return a[r]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"90ee":function(e,t,a){"use strict";a("b441")},a15b:function(e,t,a){"use strict";var s=a("23e7"),c=a("44ad"),o=a("fc6a"),r=a("a640"),n=[].join,l=c!=Object,i=r("join",",");s({target:"Array",proto:!0,forced:l||!i},{join:function(e){return n.call(o(this),void 0===e?",":e)}})},a640:function(e,t,a){"use strict";var s=a("d039");e.exports=function(e,t){var a=[][e];return!!a&&s((function(){a.call(null,t||function(){throw 1},1)}))}},b441:function(e,t,a){},d94f:function(e,t,a){"use strict";a.r(t);var s=a("7a23"),c={class:"container"},o={class:"row justify-content-center"},r={class:"col-12 col-md-10 col-lg-8"},n=Object(s["g"])("...retour aux messages"),l={class:"col-12 col-md-10 col-lg-8"},i={class:"card bg-light"},d={class:"card-header text-center",style:{"background-color":"ghostwhite"}},u={class:"text-dark h6"},b={class:"card-body",style:{"background-color":"#D4D4D4"}},m={class:"row border d-flex align-items-center m-2 p-0",style:{"background-color":"ghostwhite"}},h={class:"col-12 col-md-4 text-center"},f=Object(s["h"])("a",{href:"",class:"btn btn-sm btn-primary mb-2 p-1","data-toggle":"modal","data-target":"#modalAvatar"},"Changer de photo",-1),p={class:"modal fade",id:"modalAvatar",tabindex:"-1","aria-labelledby":"modalAvatar","aria-hidden":"true"},v={class:"modal-dialog"},j={class:"modal-content"},g=Object(s["h"])("div",{class:"modal-header"},[Object(s["h"])("p",{class:"modal-title h5"},"Changer la photo de profile")],-1),O={class:"row modal-body"},y={class:"col-6 justify-content-center"},w=Object(s["h"])("p",{class:"small text-center"},"Photo actuelle",-1),A={class:"col-6 justify-content-center"},x=Object(s["h"])("p",{class:"small text-center"},"Nouvelle photo",-1),k={class:"col-12 justify-content-center"},C={class:"form-group justify-content-center"},B=Object(s["h"])("label",{for:"File",class:"sr-only"},"Choisir une nouvelle photo",-1),S={class:"invalid-feedback"},I=Object(s["f"])('<div class="modal-footer"><div class="row w-100 justify-content-spacebetween"><div class="col-6"><a data-dismiss="modal" class="btn btn-sm btn-secondary btn-block">Annuler</a></div><div class="col-6"><button type="submit" class="btn btn-sm btn-success btn-block">Valider</button></div></div></div>',1),D={class:"col-12 col-md-8 text-dark"},R={class:"small text-left m-0 p-1"},q={class:"small text-left m-0 p-1"},N={class:"small text-left m-0 p-1"},L=Object(s["h"])("p",{class:"small text-left m-0 p-1"},"Votre contenu : ",-1),P={class:"small text-left m-0 p-1"},U={href:"#/compte/messages"},F={key:0},V={class:"small text-left m-0 p-1"},E={key:0},z={class:"card-footer",style:{"background-color":"ghostwhite"}},T={class:"row d-flex align-items-center m-0 p-0"},J={class:"col-12"},_=Object(s["h"])("a",{href:"","data-toggle":"modal","data-target":"#modalDeleteAccount",class:"btn btn-sm btn-block btn-danger"},"Supprimer mon compte !",-1),M={class:"modal fade",id:"modalDeleteAccount","data-backdrop":"static","data-keyboard":"false",tabindex:"-1","aria-labelledby":"modalDeleteAccount","aria-hidden":"true"},$={class:"modal-dialog modal-dialog-centered"},G={class:"modal-content border border-danger"},H={enctype:"multipart/form-data"},K=Object(s["f"])('<div class="modal-header"><p class="modal-title h5 text-danger">Supprimer mon compte ?</p></div><div class="row modal-body"><div class="col-12 justify-content-center form-group"><p class="text-danger"><span class="h6">ATTENTION !</span> Cette action est irreversible.</p><p>Vous ne pourrais plus vous connecter avec cette adresse email mais vos messages et commentaires seront toujours visible par les autres utilisateurs.</p><p>Êtes-vous <span class="font-weight-bold">certain</span> de vouloir supprimer votre compte ?</p></div></div>',2),Q={class:"modal-footer"},W={class:"row w-100 justify-content-spacebetween"},X=Object(s["h"])("div",{class:"col-6"},[Object(s["h"])("a",{"data-dismiss":"modal",class:"btn btn-secondary btn-block"},"Annuler")],-1),Y={class:"col-6"};function Z(e,t,a,Z,ee,te){var ae=Object(s["v"])("router-link");return Object(s["q"])(),Object(s["d"])("div",null,[Object(s["h"])("div",c,[Object(s["h"])("div",o,[Object(s["h"])("div",r,[Object(s["h"])(ae,{to:"/messages",class:"my-2 btn btn-sm btn-block btn-success"},{default:Object(s["C"])((function(){return[n]})),_:1})]),Object(s["h"])("div",l,[Object(s["h"])("div",i,[Object(s["h"])("div",d,[Object(s["h"])("span",u,Object(s["x"])(ee.userName),1)]),Object(s["h"])("div",b,[Object(s["h"])("div",m,[Object(s["h"])("div",h,[Object(s["h"])("img",{src:ee.avatar,class:"rounded-circle m-1 p-0",height:"128"},null,8,["src"]),f]),Object(s["h"])("div",p,[Object(s["h"])("div",v,[Object(s["h"])("div",j,[Object(s["h"])("form",{onSubmit:t[2]||(t[2]=Object(s["E"])((function(e){return te.updateAvatar()}),["prevent"])),enctype:"multipart/form-data"},[g,Object(s["h"])("div",O,[Object(s["h"])("div",y,[Object(s["h"])("img",{src:ee.avatar,class:"w-100 rounded-circle"},null,8,["src"]),w]),Object(s["h"])("div",A,[Object(s["h"])("img",{src:ee.newAvatar,class:"w-100 rounded-circle"},null,8,["src"]),x]),Object(s["h"])("div",k,[Object(s["h"])("div",C,[B,Object(s["h"])("input",{onChange:t[1]||(t[1]=function(e){return te.onFileChange()}),type:"file",ref:"file",name:"image",class:["form-control-file",{"is-invalid":ee.submitted&&!ee.file}],id:"File",accept:".jpg, .jpeg, .gif, .png"},null,34),Object(s["D"])(Object(s["h"])("div",S,"Une nouvelle photo est requise !",512),[[s["A"],ee.submitted&&!ee.file]])])])]),I],32)])])]),Object(s["h"])("div",D,[Object(s["h"])("p",R,"Adresse e-mail : "+Object(s["x"])(ee.email),1),Object(s["h"])("p",q,"Rôle : "+Object(s["x"])(ee.role),1),Object(s["h"])("p",N,"Crée le : "+Object(s["x"])(ee.createdAt),1),L,Object(s["h"])("ul",null,[Object(s["h"])("li",P,[Object(s["h"])("a",U,[Object(s["g"])(Object(s["x"])(ee.messagesCount)+" message",1),ee.messagesCount>1?(Object(s["q"])(),Object(s["d"])("span",F,"s")):Object(s["e"])("",!0)])]),Object(s["h"])("li",V,[Object(s["g"])(Object(s["x"])(ee.commentsCount)+" commentaire",1),ee.commentsCount>1?(Object(s["q"])(),Object(s["d"])("span",E,"s")):Object(s["e"])("",!0)])])])])]),Object(s["h"])("div",z,[Object(s["h"])("div",T,[Object(s["h"])("div",J,[_,Object(s["h"])("div",M,[Object(s["h"])("div",$,[Object(s["h"])("div",G,[Object(s["h"])("form",H,[K,Object(s["h"])("div",Q,[Object(s["h"])("div",W,[X,Object(s["h"])("div",Y,[Object(s["h"])("button",{type:"submit",onClick:t[3]||(t[3]=Object(s["E"])((function(e){return te.deleteAccount()}),["prevent"])),class:"btn btn-danger btn-block"},"Valider")])])])])])])])])])])])])])])])}a("a15b"),a("fb6a"),a("d3b7"),a("ac1f"),a("3ca3"),a("1276"),a("ddb0"),a("2b3d");var ee=a("bc3a"),te=a.n(ee),ae=a("3d20"),se=a.n(ae),ce={name:"Compte",data:function(){return{userName:"",email:"",role:"",createdAt:"",messagesCount:"",commentsCount:"",avatar:"",newAvatar:"/images/avatars/default_user.jpg",file:null,submitted:!1}},methods:{onFileChange:function(){this.file=this.$refs.file.files[0],this.newAvatar=URL.createObjectURL(this.file)},updateAvatar:function(){this.submitted=!0;var e=new FormData;e.append("image",this.file),te.a.put("http://127.0.0.1:3000/api/users/"+localStorage.getItem("userId"),e,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){localStorage.setItem("avatar",e.data.avatar),se.a.fire({text:"La photo de profil à été mise à jour !",footer:"Redirection en cours...",icon:"success",timer:1e3,showConfirmButton:!1,timerProgressBar:!0,willClose:function(){location.reload()}})})).catch((function(e){var t=e.message.split("code ")[1],a="";switch(t){case"400":a="La photo de profil n'a pas été mise à jour !";break;case"401":a="Requête non-authentifiée !";break}se.a.fire({title:"Une erreur est survenue",text:a||e.message,icon:"error",timer:1500,showConfirmButton:!1,timerProgressBar:!0})}))},deleteAccount:function(){te.a.put("http://127.0.0.1:3000/api/users/"+localStorage.getItem("userId"),{isActive:!1},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(){localStorage.clear(),se.a.fire({text:"Le compte à été supprimé !",footer:"Déconnexion en cours...",icon:"success",timer:5e3,showConfirmButton:!1,timerProgressBar:!0,willClose:function(){location.reload()}})})).catch((function(e){var t=e.message.split("code ")[1],a="";switch(t){case"400":a="La photo de profil n'a pas été mise à jour !";break;case"401":a="Requête non-authentifiée !";break}se.a.fire({title:"Une erreur est survenue",text:a||e.message,icon:"error",timer:1500,showConfirmButton:!1,timerProgressBar:!0})}))}},created:function(){var e=this;te.a.get("http://127.0.0.1:3000/api/users/"+localStorage.getItem("userId"),{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){e.userName=t.data.userName,e.email=t.data.email,e.role=t.data.role,e.createdAt=t.data.createdAt.slice(0,10).split("-").reverse().join("/")+" à "+t.data.createdAt.slice(11,16),e.messagesCount=t.data.messagesCount,e.commentsCount=t.data.commentsCount,e.avatar=t.data.avatar})).catch((function(e){var t=e.message.split("code ")[1],a="";switch(t){case"400":a="Vos informations non pas été récuperées !";break;case"401":a="Requête non-authentifiée !";break}se.a.fire({title:"Une erreur est survenue",text:a||e.message,icon:"error",timer:1500,showConfirmButton:!1,timerProgressBar:!0})}))}};a("90ee");ce.render=Z;t["default"]=ce},e8b5:function(e,t,a){var s=a("c6b6");e.exports=Array.isArray||function(e){return"Array"==s(e)}},fb6a:function(e,t,a){"use strict";var s=a("23e7"),c=a("861d"),o=a("e8b5"),r=a("23cb"),n=a("50c4"),l=a("fc6a"),i=a("8418"),d=a("b622"),u=a("1dde"),b=a("ae40"),m=u("slice"),h=b("slice",{ACCESSORS:!0,0:0,1:2}),f=d("species"),p=[].slice,v=Math.max;s({target:"Array",proto:!0,forced:!m||!h},{slice:function(e,t){var a,s,d,u=l(this),b=n(u.length),m=r(e,b),h=r(void 0===t?b:t,b);if(o(u)&&(a=u.constructor,"function"!=typeof a||a!==Array&&!o(a.prototype)?c(a)&&(a=a[f],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return p.call(u,m,h);for(s=new(void 0===a?Array:a)(v(h-m,0)),d=0;m<h;m++,d++)m in u&&i(s,d,u[m]);return s.length=d,s}})}}]);
//# sourceMappingURL=chunk-1e3e6ee6.d86ef686.js.map