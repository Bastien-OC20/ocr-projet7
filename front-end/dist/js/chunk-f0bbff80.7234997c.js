(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f0bbff80"],{"1dde":function(e,t,s){var a=s("d039"),c=s("b622"),r=s("2d00"),n=c("species");e.exports=function(e){return r>=51||!a((function(){var t=[],s=t.constructor={};return s[n]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"1f9e":function(e,t,s){},"25f0":function(e,t,s){"use strict";var a=s("6eeb"),c=s("825a"),r=s("d039"),n=s("ad6d"),i="toString",o=RegExp.prototype,l=o[i],d=r((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),u=l.name!=i;(d||u)&&a(RegExp.prototype,i,(function(){var e=c(this),t=String(e.source),s=e.flags,a=String(void 0===s&&e instanceof RegExp&&!("flags"in o)?n.call(e):s);return"/"+t+"/"+a}),{unsafe:!0})},"284c":function(e,t,s){"use strict";s.r(t);s("a15b"),s("fb6a"),s("ac1f"),s("1276");var a=s("7a23"),c={class:"container"},r={class:"row justify-content-center"},n={class:"col-12 col-md-10 col-lg-8",id:"allMessages"},i=Object(a["h"])("a",{href:"","data-toggle":"modal","data-target":"#modalAddMessage",class:"my-2 btn btn-sm btn-block btn-success"},"Poster un message...",-1),o={class:"modal fade",id:"modalAddMessage",tabindex:"-1","aria-labelledby":"modalAddMessage","aria-hidden":"true"},l={class:"modal-dialog"},d={class:"modal-content"},u={enctype:"multipart/form-data"},g=Object(a["h"])("div",{class:"modal-header"},[Object(a["h"])("p",{class:"modal-title h5"},"Poster un nouveau message")],-1),b={class:"row modal-body"},m={class:"col-12 justify-content-center form-group"},h=Object(a["h"])("label",{for:"newMessage",class:"sr-only"},"Message :",-1),f={class:"col-12 justify-content-center text-center"},j=Object(a["h"])("p",{class:"small text-center"},"Image à partager",-1),p={class:"col-12 justify-content-center"},O={class:"form-group justify-content-center"},v=Object(a["h"])("label",{for:"File",class:"sr-only"},"Choisir une nouvelle photo",-1),y={class:"modal-footer"},w={class:"row w-100 justify-content-spacebetween"},x=Object(a["h"])("div",{class:"col-6"},[Object(a["h"])("a",{"data-dismiss":"modal",class:"btn btn-secondary btn-block"},"Annuler")],-1),M={class:"col-6"},k={class:"card-header bg-light d-flex align-items-center justify-content-between m-0 p-1"},A={class:"small text-dark m-0 p-1"},I={key:0,class:"small text-danger"},S={key:0},U=Object(a["h"])("img",{src:"/images/edit.svg",class:"m-1 p-0",alt:"Editer le message",title:"Editer le message"},null,-1),q=Object(a["h"])("img",{src:"/images/drop.svg",class:"m-1 p-0",alt:"Supprimer le message",title:"Supprimer le message"},null,-1),C={class:"card-body text-dark text-left"},B={key:0,class:"small"},R={class:"card-footer bg-light text-dark text-left m-0"},E=Object(a["h"])("div",{class:"card bg-danger"},[Object(a["h"])("p",{class:"my-2 text-center text-white"},"Il n'y a pas de messages plus ancien que celui au-dessus...")],-1);function N(e,t,s,N,F,P){var L=this,V=Object(a["v"])("NoMessage");return Object(a["q"])(),Object(a["d"])("div",null,[Object(a["h"])("div",c,[Object(a["h"])("div",r,[Object(a["h"])("div",n,[i,Object(a["h"])("div",o,[Object(a["h"])("div",l,[Object(a["h"])("div",d,[Object(a["h"])("form",u,[g,Object(a["h"])("div",b,[Object(a["h"])("div",m,[h,Object(a["D"])(Object(a["h"])("textarea",{class:"form-control","onUpdate:modelValue":t[1]||(t[1]=function(e){return F.newMessage=e}),id:"newMessage",name:"message",rows:"10",placeholder:"Votre message ici..."},null,512),[[a["z"],F.newMessage]])]),Object(a["h"])("div",f,[Object(a["h"])("img",{src:F.newImage,class:"w-50 rounded"},null,8,["src"]),j]),Object(a["h"])("div",p,[Object(a["h"])("div",O,[v,Object(a["h"])("input",{onChange:t[2]||(t[2]=function(e){return P.onFileChange()}),type:"file",ref:"file",name:"image",class:"form-control-file",id:"File",accept:".jpg, .jpeg, .gif, .png"},null,544)])])]),Object(a["h"])("div",y,[Object(a["h"])("div",w,[x,Object(a["h"])("div",M,[Object(a["h"])("button",{type:"submit",onClick:t[3]||(t[3]=Object(a["E"])((function(e){return P.addNewMessage()}),["prevent"])),class:"btn btn-success btn-block"},"Valider")])])])])])])]),(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["u"])(F.messages,(function(e){return Object(a["q"])(),Object(a["d"])("div",{key:e.id,class:"card bg-light my-3"},[Object(a["h"])("div",k,[Object(a["h"])("div",null,[Object(a["h"])("img",{src:e.avatar,height:"40",class:"m-0 rounded-circle"},null,8,["src"]),Object(a["h"])("span",A,[Object(a["g"])(" Posté par "+Object(a["x"])(e.userName)+" ",1),e.isActive?Object(a["e"])("",!0):(Object(a["q"])(),Object(a["d"])("span",I,"(supprimé)")),Object(a["g"])(", le "+Object(a["x"])(e.createdAt.slice(0,10).split("-").reverse().join("/")+" à "+e.createdAt.slice(11,16)),1)])]),e.UserId==L.currentUserId||"true"==L.isAdmin?(Object(a["q"])(),Object(a["d"])("div",S,[Object(a["h"])("a",{href:"#/message/edit/"+e.id},[U],8,["href"]),Object(a["h"])("a",{href:"#/message/drop/"+e.id},[q],8,["href"])])):Object(a["e"])("",!0)]),Object(a["h"])("div",C,[""!==e.message?(Object(a["q"])(),Object(a["d"])("p",B,Object(a["x"])(e.message),1)):Object(a["e"])("",!0),""!==e.messageUrl?(Object(a["q"])(),Object(a["d"])("img",{key:1,class:"w-100",src:e.messageUrl},null,8,["src"])):Object(a["e"])("",!0)]),Object(a["h"])("div",R,[Object(a["h"])("a",{href:"#/commentaires/"+e.id,class:"h6 small"},"Voir les commentaires",8,["href"])])])})),128)),F.noMessage?(Object(a["q"])(),Object(a["d"])(V,{key:0})):Object(a["e"])("",!0),E])])])])}s("d3b7"),s("25f0"),s("3ca3"),s("ddb0"),s("2b3d");var F=s("4155"),P=s.n(F),L={class:"card bg-light"},V=Object(a["h"])("p",{class:"h5 my-3 text-center",style:{color:"#091F43"}},"Bienvenu sur le réseau social interne",-1),z=Object(a["h"])("div",{class:"card-header bg-light d-flex justify-content-center"},[Object(a["h"])("img",{src:P.a,class:"w-75 m-0 p-0",alt:"logo groupomania"})],-1),D=Object(a["h"])("div",{class:"card-body d-flex flex-column flex-md-row justify-content-center align-items-center p-1 m-1"},[Object(a["h"])("div",{class:"col-12 col-md-9 mt-3 mt-md-0 p-0 p-md"},[Object(a["h"])("p",null,"Vous êtes la première personne à vous connecter, félicitations !"),Object(a["h"])("p",null,"Il n'y a aucun message à lire pour le moment..."),Object(a["h"])("p",null,"À vous de commencer en postant le premier message !")]),Object(a["h"])("div",{class:"col-12 col-md-3 text-center"},[Object(a["h"])("img",{src:"/images/edit.svg",width:"100",height:"100"})])],-1);function J(e,t,s,c,r,n){return Object(a["q"])(),Object(a["d"])("div",L,[V,z,D])}var $={Name:"No Message"};$.render=J;var _=$,G=s("bc3a"),H=s.n(G),K=s("3d20"),Q=s.n(K),T={name:"Messages",components:{NoMessage:_},data:function(){return{noMessage:!1,isAdmin:!1,isActive:!0,newImage:"",currentUserId:"",newMessage:"",file:null,messages:[]}},methods:{onFileChange:function(){this.file=this.$refs.file.files[0],this.newImage=URL.createObjectURL(this.file)},addNewMessage:function(){var e=this,t=new FormData;t.set("image",this.file),t.set("UserId",this.currentUserId.toString()),t.set("message",this.newMessage.toString()),H.a.post("http://127.0.0.1:3000/api/messages/",t,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(){e.UserId="",e.newMessage="",e.file=null,Q.a.fire({text:"Message posté !",footer:"Redirection en cours...",icon:"success",timer:2e3,showConfirmButton:!1,timerProgressBar:!0,willClose:function(){location.reload()}})})).catch((function(e){var t=e.message.split("code ")[1],s="";switch(t){case"400":s="Le message n'a pas été posté !";break;case"401":s="Requête non-authentifiée !";break}Q.a.fire({title:"Une erreur est survenue",text:s||e.message,icon:"error",timer:3500,showConfirmButton:!1,timerProgressBar:!0})}))}},created:function(){var e=this;this.isAdmin=localStorage.getItem("role"),this.currentUserId=localStorage.getItem("userId"),null===localStorage.getItem("refresh")&&(localStorage.setItem("refresh",0),location.reload()),H.a.get("http://127.0.0.1:3000/api/messages",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){var s=t.data.ListeMessages;0===s.length?e.noMessage=!0:e.noMessage=!1,e.messages=s})).catch((function(e){var t=e.message.split("code ")[1],s="";switch(t){case"400":s="La liste des messages n'a pas été récupérer !";break}Q.a.fire({title:"Une erreur est survenue",text:s||e.message,icon:"error",timer:3500,showConfirmButton:!1,timerProgressBar:!0})}))}};s("9d3e");T.render=N;t["default"]=T},4155:function(e,t,s){e.exports=s.p+"img/logo_black.039aa83a.svg"},"9d3e":function(e,t,s){"use strict";s("1f9e")},a15b:function(e,t,s){"use strict";var a=s("23e7"),c=s("44ad"),r=s("fc6a"),n=s("a640"),i=[].join,o=c!=Object,l=n("join",",");a({target:"Array",proto:!0,forced:o||!l},{join:function(e){return i.call(r(this),void 0===e?",":e)}})},a640:function(e,t,s){"use strict";var a=s("d039");e.exports=function(e,t){var s=[][e];return!!s&&a((function(){s.call(null,t||function(){throw 1},1)}))}},e8b5:function(e,t,s){var a=s("c6b6");e.exports=Array.isArray||function(e){return"Array"==a(e)}},fb6a:function(e,t,s){"use strict";var a=s("23e7"),c=s("861d"),r=s("e8b5"),n=s("23cb"),i=s("50c4"),o=s("fc6a"),l=s("8418"),d=s("b622"),u=s("1dde"),g=s("ae40"),b=u("slice"),m=g("slice",{ACCESSORS:!0,0:0,1:2}),h=d("species"),f=[].slice,j=Math.max;a({target:"Array",proto:!0,forced:!b||!m},{slice:function(e,t){var s,a,d,u=o(this),g=i(u.length),b=n(e,g),m=n(void 0===t?g:t,g);if(r(u)&&(s=u.constructor,"function"!=typeof s||s!==Array&&!r(s.prototype)?c(s)&&(s=s[h],null===s&&(s=void 0)):s=void 0,s===Array||void 0===s))return f.call(u,b,m);for(a=new(void 0===s?Array:s)(j(m-b,0)),d=0;b<m;b++,d++)b in u&&l(a,d,u[b]);return a.length=d,a}})}}]);
//# sourceMappingURL=chunk-f0bbff80.7234997c.js.map