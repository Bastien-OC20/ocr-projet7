(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-235a1c96"],{"0a8c":function(e,t,s){},"25f0":function(e,t,s){"use strict";var a=s("6eeb"),r=s("825a"),i=s("d039"),n=s("ad6d"),o="toString",c=RegExp.prototype,l=c[o],u=i((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),d=l.name!=o;(u||d)&&a(RegExp.prototype,o,(function(){var e=r(this),t=String(e.source),s=e.flags,a=String(void 0===s&&e instanceof RegExp&&!("flags"in c)?n.call(e):s);return"/"+t+"/"+a}),{unsafe:!0})},2808:function(e,t,s){"use strict";s("0a8c")},c58b:function(e,t,s){"use strict";s.r(t);var a=s("7a23"),r={id:"modalEditMessage",tabindex:"-1","aria-labelledby":"modalEditMessage","aria-hidden":"false"},i={class:"modal-dialog"},n={class:"modal-content"},o={enctype:"multipart/form-data"},c={class:"modal-header d-flex flex-column flex-md-row align-items-center justify-content-start"},l=Object(a["h"])("p",{class:"modal-title h5 mr-1"},"Editer message",-1),u={class:"row modal-body"},d={class:"col-12 justify-content-center form-group"},g=Object(a["h"])("label",{for:"editMessage",class:"sr-only"},"Message :",-1),m={class:"col-12 justify-content-center text-center"},f=Object(a["h"])("p",{class:"small text-center"},"Image à partager",-1),h={class:"col-12 justify-content-center"},b={class:"form-group justify-content-center"},p=Object(a["h"])("label",{for:"File",class:"sr-only"},"Choisir une nouvelle photo",-1),j={class:"modal-footer"},O={class:"row w-100 justify-content-spacebetween"},v=Object(a["h"])("div",{class:"col-6"},[Object(a["h"])("a",{href:"#/messages",class:"btn btn-secondary btn-block"},"Annuler")],-1),w={class:"col-6"};function x(e,t,s,x,y,I){return Object(a["q"])(),Object(a["d"])("div",r,[Object(a["h"])("div",i,[Object(a["h"])("div",n,[Object(a["h"])("form",o,[Object(a["h"])("div",c,[l,Object(a["h"])("p",{class:["modal-title mt-1",y.editorColor]},Object(a["x"])(y.editorTag),3)]),Object(a["h"])("div",u,[Object(a["h"])("div",d,[g,Object(a["D"])(Object(a["h"])("textarea",{class:"form-control","onUpdate:modelValue":t[1]||(t[1]=function(e){return y.editMessage=e}),id:"editMessage",name:"message",rows:"10",placeholder:"Votre message ici..."},null,512),[[a["z"],y.editMessage]])]),Object(a["h"])("div",m,[Object(a["h"])("img",{src:y.newImage,class:"w-50 rounded"},null,8,["src"]),f]),Object(a["h"])("div",h,[Object(a["h"])("div",b,[p,Object(a["h"])("input",{onChange:t[2]||(t[2]=function(e){return I.onFileChange()}),type:"file",ref:"file",name:"image",class:"form-control-file",id:"File",accept:".jpg, .jpeg, .gif, .png"},null,544)])])]),Object(a["h"])("div",j,[Object(a["h"])("div",O,[v,Object(a["h"])("div",w,[Object(a["h"])("button",{type:"submit",onClick:t[3]||(t[3]=Object(a["E"])((function(e){return I.updateMessage()}),["prevent"])),class:"btn btn-success btn-block"},"Valider")])])])])])])])}s("d3b7"),s("ac1f"),s("25f0"),s("3ca3"),s("1276"),s("ddb0"),s("2b3d");var y=s("bc3a"),I=s.n(y),C=s("a18c"),M=s("3d20"),k=s.n(M),U={name:"Message Edit",data:function(){return{editMessage:"",editUserId:"",newImage:"",editorTag:"",editorColor:"text-secondary",file:null,isSucces:!1}},methods:{onFileChange:function(){this.file=this.$refs.file.files[0],this.newImage=URL.createObjectURL(this.file)},updateMessage:function(){var e=this,t=new FormData;t.set("image",this.file),t.set("message",this.editMessage.toString()),I.a.put("http://127.0.0.1:3000/api/messages/"+this.$route.params.id,t,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){200===t.status&&k.a.fire({text:"Le message à été mis à jour !",footer:"Redirection en cours...",icon:"success",timer:1e3,showConfirmButton:!1,timerProgressBar:!0,willClose:function(){e.file=null,C["a"].push("/messages")}})})).catch((function(e){var t=e.message.split("code ")[1],s="";switch(t){case"400":s="Le message n'a pas été mis à jour !";break;case"401":s="Requête non-authentifiée !";break}k.a.fire({title:"Une erreur est survenue",text:s||e.message,icon:"error",timer:1500,showConfirmButton:!1,timerProgressBar:!0})}))}},beforeMount:function(){var e=this;I.a.get("http://127.0.0.1:3000/api/messages/"+this.$route.params.id,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){e.editUserId=t.data.userId,console.log(t),e.editUserId==localStorage.getItem("userId")?(e.editorTag="( Utilisateur : "+t.data.userName+" )",e.editMessage=t.data.message,e.newImage=t.data.messageUrl):"true"==localStorage.getItem("role")?(e.editorTag="( Administrateur : "+localStorage.getItem("userName")+" )",e.editMessage=t.data.message,e.newImage=t.data.messageUrl,e.editorColor="text-danger"):k.a.fire({title:"Une erreur est survenue",text:"Vous n'avez pas accès à cette fonctionnalité !",icon:"error",timer:1500,showConfirmButton:!1,timerProgressBar:!0,willClose:function(){C["a"].push("/messages")}})})).catch((function(e){var t=e.message.split("code ")[1],s="";switch(t){case"400":s="Le message n'a pas été mis à jour !";break;case"401":s="Requête non-authentifiée !";break;case"404":s="Le message n'existe pas !";break}k.a.fire({title:"Une erreur est survenue",text:s||e.message,icon:"error",timer:1500,showConfirmButton:!1,timerProgressBar:!0,willClose:function(){C["a"].push("/messages")}})}))}};s("2808");U.render=x;t["default"]=U}}]);
//# sourceMappingURL=chunk-235a1c96.46b4e1bb.js.map